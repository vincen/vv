[TOC]

# 网上商城（面向业务）

网上商城，主要由七大系统组成。运维管理系统，商户系统，网站/app，网站后台系统，公共服务系统，数据库系统，分布式图片文件系统。

## 系统说明

### 运维管理系统

主要给运维团队使用。包括系统监控，服务降级控制，服务动态扩展等。

### 商户系统

主要给第三方接入的商户使用，包括商品、订单、页面等的自主维护。

### 网站/app

主要面向公众。

### 网站后台系统

主要面对运营团队使用。包括主页的推新，广告位租赁，热门商品置顶等。

### 公共服务系统

该系统主要是中间件，和一些公共服务如：邮件系统，短信系统等。

### 数据库系统

考虑到商品信息的不确定性，应该由关系型数据库与NoSQL数据库相结合使用，并做到增量备份，与定期全量备份。

### 分布式图片文件系统

考虑到商品展示需要大量图片、缩略图，因此必须搭建分布式图片文件系统，来满足浏览图片的吞吐量。例如：fastdsf等。

## 运维管理系统

该系统属于内业系统，仅供运维团队使用，需根据运维人员的需求，随时调整。提前能规划的有监控服务，日志分析服务，服务降级与扩展服务。

## 商户系统

商户系统现规划有：商品管理系统，订单系统（面向商户），对账系统，物流系统（面向商户），商户会员系统，库存系统，商户认证系统，商品分类系统，积分系统（面向商户），优惠卷/赠品系统（面向商户），退换货系统（面向商户），内容管理系统（面向商户）。

### 商户系统网站

聚合商户系统群的子系统，形成面向商户的网站。

## 网站/app

网站和app需要根据产品经理的设计。基础规划有：产品展示，用户系统，充值与支付系统，购物车系统，订单系统（面向用户），物流系统（面向用户），积分系统（面向用户），优惠券/赠品系统（面向用户），退换货系统（面向用户）。

### 订单系统（商户与用户）

订单系统开放给商户与用户的权限不同。用户订单权限包括新增，查询，取消，延期操作。商户订单权限包括修改，查询，取消，延期。订单的设计应该以用户付款为一组命令操作的结束。

### 优惠券/赠品系统（商户与网站）

优惠券与赠品分两种形式，一种是商户行为（包括商户主动赠予，满足一定消费额度领取，抽奖等）。一种是网站行为（主要为引流或高评级客户的回馈等）。商户行为的优惠券/赠品，只能限于在该商户使用。网站行为的，应可以全网，或者指定种类的商户使用。相应的，两者各自承担费用。

### 积分系统（商户与网站）

面向商户的积分，以消费累计，与优惠券/赠品系统可以关联。面向网站的积分，可以增加用户信誉等级，后续可以提供运费减免，分期付款等业务。

## 网站后台系统

网站后台系统主要是满足运营团队的需要，规划有：推荐系统，广告系统，通用管理系统，报表系统。

### 推荐系统

根据多个维度，如性别，地域，年龄段，热门商品，关联商品，购买过该商品的用户购买的其它商品等等。设计推荐算法。再根据推荐算法的命中率，演进算法。主要依靠机器学习的几个算法实现。

### 广告系统

依据广告协议，结合推荐系统，进行广告投放。统计广告转化率，反向优化推荐系统。

### 通用管理系统

主要是一些内容管理等，运营人员可以参与的网站管理。

### 报表系统

按日、周、月、季、年统计销量，流水，用户等报表，供运营人员使用。也可以采用付费形式，提供给商户。

## 公共服务系统

公共服务系统规划有：邮件系统（站内信），短信系统，评论评价系统，静态化系统。

### 短信系统

接入第三方短信发送系统。

### 评论评价系统

评论评价系统属于非核心系统，但是数据量有较大，因此选择NoSQL数据库进行数据存储，能减小核心数据库的压力。

### 静态化系统

提供公共接口，静态化H5页面，配合多级缓存系统，加速页面的访问。

## 数据库系统

数据库系统主要分为：对事务有较高要求的关系型数据库，和非结构化的NoSQL数据库。其中首要解决的是，混合数据库的事务保证。其它包括，数据库的集群，热备，数据备份与容灾恢复。

### 关系型数据库

关系型数据库集群的要满足分库分表的要求，在持久层与jdbc层直接引入中间层，做到分库分表对业务逻辑透明。例如：cobar，sharing-jdbc等。

## 分布式文件系统

分布式图片文件系统主要解决小文件的存储和查询。尤其是商品图片。规划有：图片处理系统，文件多级缓存系统。

### 图片处理系统

图片处理系统主要作用于缩略图自动生成，大中小三种类型图片的自动压缩。

### 文件多级缓存系统

主要作用是解决高访问量图片，或临时高访问量图片的缓存。











